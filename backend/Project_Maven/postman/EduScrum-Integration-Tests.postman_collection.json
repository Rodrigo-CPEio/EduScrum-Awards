{
	"info": {
		"_postman_id": "fe2d4ad9-1f63-4020-85ff-0f6bb80f83d2",
		"name": "EduScrum - Integrations Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "39418460"
	},
	"item": [
		{
			"name": "Create Teacher",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status 201 Created\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"",
							"// guarda dados para os próximos pedidos",
							"pm.environment.set(\"teacherEmail\", body.email);",
							"pm.environment.set(\"teacherPassword\", \"1234\");",
							"",
							"pm.test(\"Teacher email devolvido\", () => {",
							"    pm.expect(body.email).to.eql(\"prof@upt.pt\");",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"prof@upt.pt\",\n  \"password\": \"1234\",\n  \"name\": \"Professor Bruno\"\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/teachers/register",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"teachers",
						"register"
					]
				}
			},
			"response": []
		},
		{
			"name": "Login Teacher",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Login teacher OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"{{teacherEmail}}\",\n  \"password\": \"{{teacherPassword}}\"\n}"
				},
				"url": {
					"raw": "http://localhost:8080/api/teachers/login",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"teachers",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Register Student 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Student 1 created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"student1Email\", body.email);",
							"pm.environment.set(\"student1Password\", \"abcd123\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"aluno1@upt.pt\",\n  \"password\": \"abcd123\",\n  \"name\": \"Polo\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				}
			},
			"response": []
		},
		{
			"name": "Register Student 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Student 2 created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"student2Email\", body.email);",
							"pm.environment.set(\"student2Password\", \"rodriguez123\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"aluno2@upt.pt\",\n  \"password\": \"rodriguez123\",\n  \"name\": \"Rodriguez\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/students/register",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"students",
						"register"
					]
				}
			},
			"response": []
		},
		{
			"name": "Login Student 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Student 1 login OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"{{student1Email}}\",\n  \"password\": \"{{student1Password}}\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/students/login",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"students",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Course 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Course created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"courseName\", body.name);",
							"",
							"pm.test(\"Course has correct teacher email\", () => {",
							"    pm.expect(body.teacherEmail).to.eql(pm.environment.get(\"teacherEmail\"));",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"name\": \"Software Quality\",\n  \"description\": \"Intro to SQ\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/courses",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Course 2",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"name\": \"GP\",\n  \"description\": \"Intro to the most important stuff..\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/courses",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses"
					]
				}
			},
			"response": []
		},
		{
			"name": "Enroll/Add Student 1 in Course 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Enroll student1 OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"studentEmail\": \"{{student1Email}}\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/courses/SQ/enroll",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"SQ",
						"enroll"
					]
				}
			},
			"response": []
		},
		{
			"name": "Enroll/Add Student 2 in Course 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Enroll student2 OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"studentEmail\": \"{{student2Email}}\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/courses/SQ/enroll",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"SQ",
						"enroll"
					]
				}
			},
			"response": []
		},
		{
			"name": "List Students in Course 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"List students OK (200)\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Course has at least 2 students\", () => {",
							"    const list = pm.response.json();",
							"    pm.expect(list.length).to.be.at.least(2);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/courses/SQ/students",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"SQ",
						"students"
					]
				}
			},
			"response": []
		},
		{
			"name": "List Students in Course 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"List students OK (200)\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Course has at least 2 students\", () => {",
							"    const list = pm.response.json();",
							"    pm.expect(list.length).to.be.at.least(2);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/courses/SQ/students",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"SQ",
						"students"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Project",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Project created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"projectName\", body.name);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"courseName\": \"SQ\",\n  \"projectName\": \"Project Alpha\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/projects",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"projects"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Team",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Team created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"teamName\", body.name);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"projectName\": \"Project Alpha\",\n  \"teamName\": \"Team A\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/teams",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"teams"
					]
				}
			},
			"response": []
		},
		{
			"name": "Add Members to Team",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Add member OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Team has at least 1 member\", () => {",
							"    const body = pm.response.json();",
							"    pm.expect(body.members.length).to.be.at.least(1);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"studentEmail\": \"{{student1Email}}\",\n  \"role\": \"SCRUM_MASTER\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/teams/{{projectName}}/{{teamName}}/members",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"teams",
						"{{projectName}}",
						"{{teamName}}",
						"members"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Award",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Award created (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const body = pm.response.json();",
							"pm.environment.set(\"awardName\", body.name);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"name\": \"Best Participation\",\n  \"description\": \"For active participation\",\n  \"points\": 10,\n  \"type\": \"MANUAL\",\n  \"triggerCondition\": \"Participates in all sprints\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/awards",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"awards"
					]
				}
			},
			"response": []
		},
		{
			"name": "Assign Award to Student",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Award assigned to student (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"studentEmail\": \"{{student1Email}}\",\n  \"awardName\": \"{{awardName}}\",\n  \"reason\": \"Great teamwork\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/awards/assign/student",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"awards",
						"assign",
						"student"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Awards of Student",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Get student awards OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Student has at least 1 award\", () => {",
							"    const awards = pm.response.json();",
							"    pm.expect(awards.length).to.be.at.least(1);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/students/{{student1Email}}/awards",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"students",
						"{{student1Email}}",
						"awards"
					]
				}
			},
			"response": []
		},
		{
			"name": "Assign Award to Team",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Award assigned to team (201)\", () => {",
							"    pm.response.to.have.status(201);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"teacherEmail\": \"{{teacherEmail}}\",\n  \"projectName\": \"{{projectName}}\",\n  \"teamName\": \"{{teamName}}\",\n  \"awardName\": \"{{awardName}}\",\n  \"reason\": \"Best sprint result\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/awards/assign/team",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"awards",
						"assign",
						"team"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Team Score",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Get team score OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// se o TeamResponse tiver um campo totalScore:",
							"pm.test(\"Team totalScore >= 10\", () => {",
							"    const body = pm.response.json();",
							"    pm.expect(body.totalScore).to.be.at.least(10);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/teams/{{projectName}}/{{teamName}}/score",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"teams",
						"{{projectName}}",
						"{{teamName}}",
						"score"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Ranking Student",
			"request": {
				"method": "GET",
				"header": []
			},
			"response": []
		},
		{
			"name": "Get Ranking Team",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Team ranking OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/courses/{{courseName}}/ranking/teams",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"{{courseName}}",
						"ranking",
						"teams"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Average Score",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Average score OK\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/courses/{{courseName}}/average-score",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"{{courseName}}",
						"average-score"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Course Description",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Course updated\", () => {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Description updated\", () => {",
							"    const json = pm.response.json();",
							"    pm.expect(json.description).to.eql(\"Updated description\");",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{ \"description\": \"Updated description\" }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/courses/{{courseName}}",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"{{courseName}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Student Name",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Student updated\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{ \"name\": \"João\" }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/api/students/{{student1Email}}",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"students",
						"{{student1Email}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete Student",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Student deleted\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/students/{{student2Email}}",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"students",
						"{{student2Email}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete Course",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Course deleted\", () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "http://localhost:8080/api/courses/GP",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"api",
						"courses",
						"GP"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Student Count in Course",
			"request": {
				"method": "GET",
				"header": []
			},
			"response": []
		}
	]
}